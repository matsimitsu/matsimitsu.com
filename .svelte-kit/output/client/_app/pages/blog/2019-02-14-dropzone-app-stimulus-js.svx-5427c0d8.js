import{S as a,i as n,s,A as t,j as e,m as o,o as p,p as c,v as l,r,w as i,q as u,e as k,t as h,k as d,c as m,a as f,g,d as w,n as v,b as E,f as b,E as y,G as D}from"../../chunks/vendor-f5a3c274.js";import{M as T}from"../../chunks/_mdsvex-0fbf9182.js";import{R as C}from"../../chunks/ResponsiveImage-8c4fb22f.js";import"../../chunks/stores-0da78aa4.js";import"../../chunks/FormattedDate-b4a44e35.js";function I(a){let n,s,t,c,u,T,I,S,P,O,z,L,W,$,j,A,M,H,R,q,U,F,x,_,B,N,Y,G,J,Q,V,Z,K,X,aa,na,sa,ta,ea,oa,pa,ca,la,ra,ia,ua,ka,ha,da,ma,fa,ga,wa,va,Ea,ba,ya,Da,Ta,Ca,Ia,Sa,Pa,Oa,za,La,Wa,$a,ja,Aa,Ma,Ha,Ra,qa,Ua,Fa,xa,_a,Ba,Na,Ya,Ga,Ja,Qa,Va,Za,Ka,Xa,an,nn,sn,tn,en,on,pn,cn,ln,rn,un,kn,hn,dn,mn,fn,gn,wn,vn,En,bn,yn,Dn,Tn,Cn,In,Sn,Pn,On,zn,Ln,Wn,$n,jn,An,Mn,Hn,Rn,qn,Un,Fn,xn,_n,Bn,Nn,Yn,Gn,Jn,Qn,Vn,Zn,Kn,Xn,as,ns,ss,ts,es,os,ps,cs,ls,rs,is,us,ks,hs,ds,ms,fs,gs,ws,vs,Es,bs,ys,Ds,Ts,Cs,Is,Ss,Ps,Os,zs,Ls,Ws,$s,js,As,Ms,Hs,Rs,qs,Us,Fs,xs,_s,Bs,Ns,Ys,Gs,Js,Qs,Vs,Zs,Ks,Xs,at,nt,st,tt,et,ot,pt,ct,lt,rt,it,ut,kt,ht,dt,mt,ft,gt,wt,vt,Et,bt,yt,Dt,Tt,Ct,It,St,Pt,Ot,zt,Lt,Wt,$t,jt,At,Mt,Ht,Rt,qt,Ut,Ft,xt,_t,Bt,Nt,Yt,Gt,Jt,Qt,Vt,Zt,Kt,Xt,ae,ne,se,te,ee,oe,pe,ce,le,re,ie,ue,ke,he,de,me,fe,ge,we,ve,Ee,be,ye,De,Te,Ce,Ie,Se,Pe,Oe,ze,Le,We,$e,je,Ae,Me,He,Re,qe,Ue,Fe,xe,_e,Be,Ne,Ye,Ge,Je,Qe,Ve,Ze,Ke,Xe,ao,no,so,to,eo,oo,po,co,lo,ro,io,uo,ko,ho,mo,fo,go,wo,vo,Eo,bo,yo,Do,To,Co,Io,So,Po,Oo,zo,Lo,Wo,$o,jo,Ao,Mo,Ho,Ro,qo,Uo,Fo,xo,_o,Bo,No,Yo,Go,Jo;return z=new C({props:{src:"https://cdn.matsimitsu.com/blog/dropzone-app/text-editor.jpg",width:"1717",height:"1216",alt:"Screenshot of vs-code with this blogs code"}}),ne=new C({props:{src:"https://cdn.matsimitsu.com/blog/dropzone-app/screenshot-dropzone-controller.jpg",width:"1367",height:"1230",alt:"Screenshot of webpage with dropzone controller"}}),Mo=new C({props:{src:"https://cdn.matsimitsu.com/blog/dropzone-app/screenshot-app-complete.jpg",width:"1367",height:"1230",alt:"Screenshot of dropzone completed app"}}),{c(){n=k("h2"),s=k("a"),t=h("The problem."),c=d(),u=k("p"),T=h("I take a lot of photo’s on each trip I take and collect them on my "),I=k("a"),S=h("blog"),P=h(". Each of these photo’s is inserted into a markdown file and after a dozen or more images the markdown becomes unreadable."),O=d(),e(z.$$.fragment),L=d(),W=k("p"),$=h("I upload the images to S3 with "),j=k("a"),A=h("CyberDuck"),M=h(" and from there AWS Lambda takes care of image resizing. This way I can drop an entire folder of images onto CyberDuck and everything is taken care of."),H=d(),R=k("p"),q=h("Well.. everything but inserting the images into the markdown file. I did have a script for that, but usually I like to arrange images in a different order, or group them together. This is really tedious with 50 images, as I have to refresh the page each time I move an image."),U=d(),F=k("h2"),x=k("a"),_=h("The solution."),B=d(),N=k("p"),Y=h("What I want is a place where I can see all the images I can use and get the correct markdown tag to insert into my post."),G=d(),J=k("p"),Q=h("I can build a 200MB Electron App with React, but we can do the job a lot easier with plain HTML and "),V=k("a"),Z=h("Stimulus.js"),K=h(". Their "),X=k("a"),aa=h("handbook"),na=h(" already describes a good part of what I want, something that can set my clipboard to a markdown tag."),sa=d(),ta=k("h3"),ea=k("a"),oa=h("Dropzone."),pa=d(),ca=k("p"),la=h("The “app” will consist of a “drop zone” where I can drop images and an input where I can set the base url for the markdown tag."),ra=d(),ia=k("p"),ua=h("The HTMl looks something like this:"),ka=d(),ha=k("pre"),da=d(),ma=k("p"),fa=h("We have a Stimulus controller called “dropzone” that listens to three DOM events, "),ga=k("code"),wa=h("dragOver"),va=h(", "),Ea=k("code"),ba=h("drop"),ya=h(" and "),Da=k("code"),Ta=h("dragLeave"),Ca=h(". It maps these to three Javascript functions in the Stimulus controller."),Ia=d(),Sa=k("p"),Pa=h("For example "),Oa=k("code"),za=h("dragover->dropzone#acceptDrop"),La=h(" means that Stimulus will call "),Wa=k("code"),$a=h("acceptDrop"),ja=h(" on the "),Aa=k("code"),Ma=h("dropzone"),Ha=h(" controller when "),Ra=k("code"),qa=h("dragOver"),Ua=h(" is triggered."),Fa=d(),xa=k("p"),_a=h("To get a working URL to the image we need a base url that will prepend the image name, for this we use an input. To be able to read the input from Stimulus, we have to make it available. We do this by setting it as a target with "),Ba=k("code"),Na=h('data-target="dropzone.baseUrl"'),Ya=h("."),Ga=d(),Ja=k("p"),Qa=h("We also need a place to render the dropped image, for this we also need a target, in this case it’s the "),Va=k("code"),Za=h("UL"),Ka=h(" with "),Xa=k("code"),an=h('data-target="dropzone.polaroidList"'),nn=h("."),sn=d(),tn=k("h3"),en=k("a"),on=h("The Stimulus controller."),pn=d(),cn=k("p"),ln=h("The Stimulus controller looks like this:"),rn=d(),un=k("pre"),kn=d(),hn=k("p"),dn=h("We can see the three bound functions, "),mn=k("code"),fn=h("acceptDrop"),gn=h(" that adds a class to our element, so we can style it accordingly to let the user know that the files can be dropped. "),wn=k("code"),vn=h("leaveDrop"),En=h(" to remove the styling when the user decides to not drop the images. Finally "),bn=k("code"),yn=h("handleDrop"),Dn=h(" that will proces the dropped files to render images."),Tn=d(),Cn=k("p"),In=h("There are two other functions that we’ll need to render the image."),Sn=d(),Pn=k("h3"),On=k("a"),zn=h("Drop the image."),Ln=d(),Wn=k("p"),$n=h("Let’s start with handling the files that have been dropped, we need to get the data from the file, so we can render an image."),jn=d(),An=k("p"),Mn=k("a"),Hn=h("Mozilla’s MDN"),Rn=h(" tells me this is the way to do it, so we’ll use that."),qn=d(),Un=k("pre"),Fn=d(),xn=k("p"),_n=h("We start by removing the "),Bn=k("code"),Nn=h("dropzone—dropping"),Yn=h(" class from the element, so it no longer tells the user it’s ok to drop files (as that’s already been done)."),Gn=d(),Jn=k("p"),Qn=h("Then we check what kind of drop event we have, depending on the browser we need to handle the event differently. Both ways result in the "),Vn=k("code"),Zn=h("addImage"),Kn=h(" method being called with the dropped file, let’s see what it does."),Xn=d(),as=k("h3"),ns=k("a"),ss=h("Load the image."),ts=d(),es=k("p"),os=h("Now that we have the raw data from the dropped file, we need to convert it into an Image, as we can’t display the raw data by itself. This is where "),ps=k("a"),cs=h("FileReader"),ls=h(" comes in.  It’s a way to read raw data and return a "),rs=k("code"),is=h("data:"),us=h(" url that we can use in the image’s "),ks=k("code"),hs=h("src"),ds=h(" tag. "),ms=k("a"),fs=h("You can read more about it here"),gs=d(),ws=k("p"),vs=h("The FileReader works with a callback, and our function looks like this:"),Es=d(),bs=k("pre"),ys=d(),Ds=k("p"),Ts=h("We create a new FileReader and set the "),Cs=k("code"),Is=h("onload"),Ss=h(" event to call "),Ps=k("code"),Os=h("renderImage"),zs=h(" in our controller. We then pass in the raw data so it can load the data."),Ls=d(),Ws=k("h3"),$s=k("a"),js=h("Render the image."),As=d(),Ms=k("p"),Hs=h("Now that we have a "),Rs=k("code"),qs=h("data:"),Us=h(" url that works with the image’s "),Fs=k("code"),xs=h("src"),_s=h(" attribute, we need some place to render it."),Bs=d(),Ns=k("p"),Ys=h("We can use a lot of "),Gs=k("code"),Js=h("document.createElement"),Qs=h(" calls to eventually get the structure we need, but modern browsers have a much nicer way to accomplish this called "),Vs=k("a"),Zs=h("templates"),Ks=h("."),Xs=d(),at=k("p"),nt=h("Ours looks like this:"),st=d(),tt=k("pre"),et=d(),ot=k("p"),pt=h("Because we use the "),ct=k("code"),lt=h("<template>"),rt=h(" tag, the browser won’t actually render this HTML, but we can still use it to populate it with our image and render it to the DOM."),it=d(),ut=k("p"),kt=h("If you look closely you can see that this template contains another Stimulus controller named "),ht=k("code"),dt=h("polaroid"),mt=h("."),ft=d(),gt=k("p"),wt=h("This is where "),vt=k("code"),Et=h("renderImage()"),bt=h(" in our controller comes in."),yt=d(),Dt=k("pre"),Tt=d(),Ct=k("p"),It=h("What we can do with the template is clone it to a new element and then change the attributes of its children to the values we like."),St=d(),Pt=k("p"),Ot=h("In our case we render the given image to the "),zt=k("code"),Lt=h("img"),Wt=h(" tag and we set two data attributes we need along the way."),$t=d(),jt=k("p"),At=h("You can also see that we use the two targets we made in our HTML, "),Mt=k("code"),Ht=h("baseUrl"),Rt=h(" and "),qt=k("code"),Ut=h("polaroidList"),Ft=h(". We can access these targets in our Stimulus class by appending "),xt=k("code"),_t=h("Target"),Bt=h(" to the names. "),Nt=k("code"),Yt=h("polaroidList"),Gt=h(" becomes "),Jt=k("code"),Qt=h("polaroidListTarget"),Vt=h(" which we use to append our cloned template to the DOM."),Zt=d(),Kt=k("p"),Xt=h("With a few sprinkles of CSS it should look something like this:"),ae=d(),e(ne.$$.fragment),se=d(),te=k("h2"),ee=k("a"),oe=h("The Polaroid"),pe=d(),ce=k("p"),le=h("As described before, the template tag contained a "),re=k("code"),ie=h("polaroid"),ue=h(" controller "),ke=k("code"),he=h("data"),de=h(" attribute. This is hooked up to a "),me=k("code"),fe=h("polaroid"),ge=h(" controller in Stimulus.js that looks like this:"),we=d(),ve=k("pre"),Ee=d(),be=k("p"),ye=h("The template set two targets:"),De=d(),Te=k("p"),Ce=h("The image tag ("),Ie=k("code"),Se=h('<img data-target="polaroid.image" />'),Pe=h(") and an input field ("),Oe=k("code"),ze=h('<input data-target="polaroid.source" />'),Le=h(") where we’ll generate the markdown tag."),We=d(),$e=k("p"),je=h("We use the "),Ae=k("code"),Me=h("connect()"),He=h(" function that is called whenever a new controller is detected to check if the browser supports clipboard access and if it does we’ll add a class name to the polaroid element. We can use CSS to render the copy button."),Re=d(),qe=k("p"),Ue=h("We also calculate the image ratio and fill out the input field, based on the data from the "),Fe=k("code"),xe=h("data"),_e=h(" attributes we passed in the "),Be=k("code"),Ne=h("dropzone"),Ye=h(" controller using the "),Ge=k("code"),Je=h("target"),Qe=h("s mentioned above."),Ve=d(),Ze=k("h3"),Ke=k("a"),Xe=h("Set clipboard"),ao=d(),no=k("p"),so=h("The last thing we need to do is to connect the link that says "),to=k("code"),eo=h("copy"),oo=h(" with the Stimulus controller:"),po=d(),co=k("pre"),lo=d(),ro=k("p"),io=h("This will call the "),uo=k("code"),ko=h("copy"),ho=h(" function in our controller:"),mo=d(),fo=k("pre"),go=d(),wo=k("p"),vo=h("The "),Eo=k("code"),bo=h("copy"),yo=h(" function stops the event so we can handle it ourselves. We select the value of the input and issue the "),Do=k("code"),To=h("copy"),Co=h(" command to the browser. Finally we add a class to our "),Io=k("code"),So=h("polaroid"),Po=h(" element, so we can show that the file has been copied."),Oo=d(),zo=k("p"),Lo=h("With a few "),Wo=k("a"),$o=h("fontawesome"),jo=h(" icons and a bit of CSS it now looks like this:"),Ao=d(),e(Mo.$$.fragment),Ho=d(),Ro=k("p"),qo=h("You can find the code on "),Uo=k("a"),Fo=h("GitHub"),xo=h(" and view a "),_o=k("a"),Bo=h("live demo here"),No=d(),Yo=k("p"),Go=h("With all these amazing frameworks we have available these days it’s very easy to make a small one-page app to scratch an itch and Stimulus.js is a great library to add dynamic items to your page without having to use React or Vue and if you still use jQuery I highly recommend to move to Stimulus.js."),this.h()},l(a){n=m(a,"H2",{id:!0});var e=f(n);s=m(e,"A",{href:!0});var p=f(s);t=g(p,"The problem."),p.forEach(w),e.forEach(w),c=v(a),u=m(a,"P",{});var l=f(u);T=g(l,"I take a lot of photo’s on each trip I take and collect them on my "),I=m(l,"A",{href:!0,rel:!0});var r=f(I);S=g(r,"blog"),r.forEach(w),P=g(l,". Each of these photo’s is inserted into a markdown file and after a dozen or more images the markdown becomes unreadable."),l.forEach(w),O=v(a),o(z.$$.fragment,a),L=v(a),W=m(a,"P",{});var i=f(W);$=g(i,"I upload the images to S3 with "),j=m(i,"A",{href:!0,rel:!0});var k=f(j);A=g(k,"CyberDuck"),k.forEach(w),M=g(i," and from there AWS Lambda takes care of image resizing. This way I can drop an entire folder of images onto CyberDuck and everything is taken care of."),i.forEach(w),H=v(a),R=m(a,"P",{});var h=f(R);q=g(h,"Well.. everything but inserting the images into the markdown file. I did have a script for that, but usually I like to arrange images in a different order, or group them together. This is really tedious with 50 images, as I have to refresh the page each time I move an image."),h.forEach(w),U=v(a),F=m(a,"H2",{id:!0});var d=f(F);x=m(d,"A",{href:!0});var E=f(x);_=g(E,"The solution."),E.forEach(w),d.forEach(w),B=v(a),N=m(a,"P",{});var b=f(N);Y=g(b,"What I want is a place where I can see all the images I can use and get the correct markdown tag to insert into my post."),b.forEach(w),G=v(a),J=m(a,"P",{});var y=f(J);Q=g(y,"I can build a 200MB Electron App with React, but we can do the job a lot easier with plain HTML and "),V=m(y,"A",{href:!0,rel:!0});var D=f(V);Z=g(D,"Stimulus.js"),D.forEach(w),K=g(y,". Their "),X=m(y,"A",{href:!0,rel:!0});var C=f(X);aa=g(C,"handbook"),C.forEach(w),na=g(y," already describes a good part of what I want, something that can set my clipboard to a markdown tag."),y.forEach(w),sa=v(a),ta=m(a,"H3",{id:!0});var Jo=f(ta);ea=m(Jo,"A",{href:!0});var Qo=f(ea);oa=g(Qo,"Dropzone."),Qo.forEach(w),Jo.forEach(w),pa=v(a),ca=m(a,"P",{});var Vo=f(ca);la=g(Vo,"The “app” will consist of a “drop zone” where I can drop images and an input where I can set the base url for the markdown tag."),Vo.forEach(w),ra=v(a),ia=m(a,"P",{});var Zo=f(ia);ua=g(Zo,"The HTMl looks something like this:"),Zo.forEach(w),ka=v(a),ha=m(a,"PRE",{class:!0}),f(ha).forEach(w),da=v(a),ma=m(a,"P",{});var Ko=f(ma);fa=g(Ko,"We have a Stimulus controller called “dropzone” that listens to three DOM events, "),ga=m(Ko,"CODE",{});var Xo=f(ga);wa=g(Xo,"dragOver"),Xo.forEach(w),va=g(Ko,", "),Ea=m(Ko,"CODE",{});var ap=f(Ea);ba=g(ap,"drop"),ap.forEach(w),ya=g(Ko," and "),Da=m(Ko,"CODE",{});var np=f(Da);Ta=g(np,"dragLeave"),np.forEach(w),Ca=g(Ko,". It maps these to three Javascript functions in the Stimulus controller."),Ko.forEach(w),Ia=v(a),Sa=m(a,"P",{});var sp=f(Sa);Pa=g(sp,"For example "),Oa=m(sp,"CODE",{});var tp=f(Oa);za=g(tp,"dragover->dropzone#acceptDrop"),tp.forEach(w),La=g(sp," means that Stimulus will call "),Wa=m(sp,"CODE",{});var ep=f(Wa);$a=g(ep,"acceptDrop"),ep.forEach(w),ja=g(sp," on the "),Aa=m(sp,"CODE",{});var op=f(Aa);Ma=g(op,"dropzone"),op.forEach(w),Ha=g(sp," controller when "),Ra=m(sp,"CODE",{});var pp=f(Ra);qa=g(pp,"dragOver"),pp.forEach(w),Ua=g(sp," is triggered."),sp.forEach(w),Fa=v(a),xa=m(a,"P",{});var cp=f(xa);_a=g(cp,"To get a working URL to the image we need a base url that will prepend the image name, for this we use an input. To be able to read the input from Stimulus, we have to make it available. We do this by setting it as a target with "),Ba=m(cp,"CODE",{});var lp=f(Ba);Na=g(lp,'data-target="dropzone.baseUrl"'),lp.forEach(w),Ya=g(cp,"."),cp.forEach(w),Ga=v(a),Ja=m(a,"P",{});var rp=f(Ja);Qa=g(rp,"We also need a place to render the dropped image, for this we also need a target, in this case it’s the "),Va=m(rp,"CODE",{});var ip=f(Va);Za=g(ip,"UL"),ip.forEach(w),Ka=g(rp," with "),Xa=m(rp,"CODE",{});var up=f(Xa);an=g(up,'data-target="dropzone.polaroidList"'),up.forEach(w),nn=g(rp,"."),rp.forEach(w),sn=v(a),tn=m(a,"H3",{id:!0});var kp=f(tn);en=m(kp,"A",{href:!0});var hp=f(en);on=g(hp,"The Stimulus controller."),hp.forEach(w),kp.forEach(w),pn=v(a),cn=m(a,"P",{});var dp=f(cn);ln=g(dp,"The Stimulus controller looks like this:"),dp.forEach(w),rn=v(a),un=m(a,"PRE",{class:!0}),f(un).forEach(w),kn=v(a),hn=m(a,"P",{});var mp=f(hn);dn=g(mp,"We can see the three bound functions, "),mn=m(mp,"CODE",{});var fp=f(mn);fn=g(fp,"acceptDrop"),fp.forEach(w),gn=g(mp," that adds a class to our element, so we can style it accordingly to let the user know that the files can be dropped. "),wn=m(mp,"CODE",{});var gp=f(wn);vn=g(gp,"leaveDrop"),gp.forEach(w),En=g(mp," to remove the styling when the user decides to not drop the images. Finally "),bn=m(mp,"CODE",{});var wp=f(bn);yn=g(wp,"handleDrop"),wp.forEach(w),Dn=g(mp," that will proces the dropped files to render images."),mp.forEach(w),Tn=v(a),Cn=m(a,"P",{});var vp=f(Cn);In=g(vp,"There are two other functions that we’ll need to render the image."),vp.forEach(w),Sn=v(a),Pn=m(a,"H3",{id:!0});var Ep=f(Pn);On=m(Ep,"A",{href:!0});var bp=f(On);zn=g(bp,"Drop the image."),bp.forEach(w),Ep.forEach(w),Ln=v(a),Wn=m(a,"P",{});var yp=f(Wn);$n=g(yp,"Let’s start with handling the files that have been dropped, we need to get the data from the file, so we can render an image."),yp.forEach(w),jn=v(a),An=m(a,"P",{});var Dp=f(An);Mn=m(Dp,"A",{href:!0,rel:!0});var Tp=f(Mn);Hn=g(Tp,"Mozilla’s MDN"),Tp.forEach(w),Rn=g(Dp," tells me this is the way to do it, so we’ll use that."),Dp.forEach(w),qn=v(a),Un=m(a,"PRE",{class:!0}),f(Un).forEach(w),Fn=v(a),xn=m(a,"P",{});var Cp=f(xn);_n=g(Cp,"We start by removing the "),Bn=m(Cp,"CODE",{});var Ip=f(Bn);Nn=g(Ip,"dropzone—dropping"),Ip.forEach(w),Yn=g(Cp," class from the element, so it no longer tells the user it’s ok to drop files (as that’s already been done)."),Cp.forEach(w),Gn=v(a),Jn=m(a,"P",{});var Sp=f(Jn);Qn=g(Sp,"Then we check what kind of drop event we have, depending on the browser we need to handle the event differently. Both ways result in the "),Vn=m(Sp,"CODE",{});var Pp=f(Vn);Zn=g(Pp,"addImage"),Pp.forEach(w),Kn=g(Sp," method being called with the dropped file, let’s see what it does."),Sp.forEach(w),Xn=v(a),as=m(a,"H3",{id:!0});var Op=f(as);ns=m(Op,"A",{href:!0});var zp=f(ns);ss=g(zp,"Load the image."),zp.forEach(w),Op.forEach(w),ts=v(a),es=m(a,"P",{});var Lp=f(es);os=g(Lp,"Now that we have the raw data from the dropped file, we need to convert it into an Image, as we can’t display the raw data by itself. This is where "),ps=m(Lp,"A",{href:!0,rel:!0});var Wp=f(ps);cs=g(Wp,"FileReader"),Wp.forEach(w),ls=g(Lp," comes in.  It’s a way to read raw data and return a "),rs=m(Lp,"CODE",{});var $p=f(rs);is=g($p,"data:"),$p.forEach(w),us=g(Lp," url that we can use in the image’s "),ks=m(Lp,"CODE",{});var jp=f(ks);hs=g(jp,"src"),jp.forEach(w),ds=g(Lp," tag. "),ms=m(Lp,"A",{href:!0,rel:!0});var Ap=f(ms);fs=g(Ap,"You can read more about it here"),Ap.forEach(w),Lp.forEach(w),gs=v(a),ws=m(a,"P",{});var Mp=f(ws);vs=g(Mp,"The FileReader works with a callback, and our function looks like this:"),Mp.forEach(w),Es=v(a),bs=m(a,"PRE",{class:!0}),f(bs).forEach(w),ys=v(a),Ds=m(a,"P",{});var Hp=f(Ds);Ts=g(Hp,"We create a new FileReader and set the "),Cs=m(Hp,"CODE",{});var Rp=f(Cs);Is=g(Rp,"onload"),Rp.forEach(w),Ss=g(Hp," event to call "),Ps=m(Hp,"CODE",{});var qp=f(Ps);Os=g(qp,"renderImage"),qp.forEach(w),zs=g(Hp," in our controller. We then pass in the raw data so it can load the data."),Hp.forEach(w),Ls=v(a),Ws=m(a,"H3",{id:!0});var Up=f(Ws);$s=m(Up,"A",{href:!0});var Fp=f($s);js=g(Fp,"Render the image."),Fp.forEach(w),Up.forEach(w),As=v(a),Ms=m(a,"P",{});var xp=f(Ms);Hs=g(xp,"Now that we have a "),Rs=m(xp,"CODE",{});var _p=f(Rs);qs=g(_p,"data:"),_p.forEach(w),Us=g(xp," url that works with the image’s "),Fs=m(xp,"CODE",{});var Bp=f(Fs);xs=g(Bp,"src"),Bp.forEach(w),_s=g(xp," attribute, we need some place to render it."),xp.forEach(w),Bs=v(a),Ns=m(a,"P",{});var Np=f(Ns);Ys=g(Np,"We can use a lot of "),Gs=m(Np,"CODE",{});var Yp=f(Gs);Js=g(Yp,"document.createElement"),Yp.forEach(w),Qs=g(Np," calls to eventually get the structure we need, but modern browsers have a much nicer way to accomplish this called "),Vs=m(Np,"A",{href:!0,rel:!0});var Gp=f(Vs);Zs=g(Gp,"templates"),Gp.forEach(w),Ks=g(Np,"."),Np.forEach(w),Xs=v(a),at=m(a,"P",{});var Jp=f(at);nt=g(Jp,"Ours looks like this:"),Jp.forEach(w),st=v(a),tt=m(a,"PRE",{class:!0}),f(tt).forEach(w),et=v(a),ot=m(a,"P",{});var Qp=f(ot);pt=g(Qp,"Because we use the "),ct=m(Qp,"CODE",{});var Vp=f(ct);lt=g(Vp,"<template>"),Vp.forEach(w),rt=g(Qp," tag, the browser won’t actually render this HTML, but we can still use it to populate it with our image and render it to the DOM."),Qp.forEach(w),it=v(a),ut=m(a,"P",{});var Zp=f(ut);kt=g(Zp,"If you look closely you can see that this template contains another Stimulus controller named "),ht=m(Zp,"CODE",{});var Kp=f(ht);dt=g(Kp,"polaroid"),Kp.forEach(w),mt=g(Zp,"."),Zp.forEach(w),ft=v(a),gt=m(a,"P",{});var Xp=f(gt);wt=g(Xp,"This is where "),vt=m(Xp,"CODE",{});var ac=f(vt);Et=g(ac,"renderImage()"),ac.forEach(w),bt=g(Xp," in our controller comes in."),Xp.forEach(w),yt=v(a),Dt=m(a,"PRE",{class:!0}),f(Dt).forEach(w),Tt=v(a),Ct=m(a,"P",{});var nc=f(Ct);It=g(nc,"What we can do with the template is clone it to a new element and then change the attributes of its children to the values we like."),nc.forEach(w),St=v(a),Pt=m(a,"P",{});var sc=f(Pt);Ot=g(sc,"In our case we render the given image to the "),zt=m(sc,"CODE",{});var tc=f(zt);Lt=g(tc,"img"),tc.forEach(w),Wt=g(sc," tag and we set two data attributes we need along the way."),sc.forEach(w),$t=v(a),jt=m(a,"P",{});var ec=f(jt);At=g(ec,"You can also see that we use the two targets we made in our HTML, "),Mt=m(ec,"CODE",{});var oc=f(Mt);Ht=g(oc,"baseUrl"),oc.forEach(w),Rt=g(ec," and "),qt=m(ec,"CODE",{});var pc=f(qt);Ut=g(pc,"polaroidList"),pc.forEach(w),Ft=g(ec,". We can access these targets in our Stimulus class by appending "),xt=m(ec,"CODE",{});var cc=f(xt);_t=g(cc,"Target"),cc.forEach(w),Bt=g(ec," to the names. "),Nt=m(ec,"CODE",{});var lc=f(Nt);Yt=g(lc,"polaroidList"),lc.forEach(w),Gt=g(ec," becomes "),Jt=m(ec,"CODE",{});var rc=f(Jt);Qt=g(rc,"polaroidListTarget"),rc.forEach(w),Vt=g(ec," which we use to append our cloned template to the DOM."),ec.forEach(w),Zt=v(a),Kt=m(a,"P",{});var ic=f(Kt);Xt=g(ic,"With a few sprinkles of CSS it should look something like this:"),ic.forEach(w),ae=v(a),o(ne.$$.fragment,a),se=v(a),te=m(a,"H2",{id:!0});var uc=f(te);ee=m(uc,"A",{href:!0});var kc=f(ee);oe=g(kc,"The Polaroid"),kc.forEach(w),uc.forEach(w),pe=v(a),ce=m(a,"P",{});var hc=f(ce);le=g(hc,"As described before, the template tag contained a "),re=m(hc,"CODE",{});var dc=f(re);ie=g(dc,"polaroid"),dc.forEach(w),ue=g(hc," controller "),ke=m(hc,"CODE",{});var mc=f(ke);he=g(mc,"data"),mc.forEach(w),de=g(hc," attribute. This is hooked up to a "),me=m(hc,"CODE",{});var fc=f(me);fe=g(fc,"polaroid"),fc.forEach(w),ge=g(hc," controller in Stimulus.js that looks like this:"),hc.forEach(w),we=v(a),ve=m(a,"PRE",{class:!0}),f(ve).forEach(w),Ee=v(a),be=m(a,"P",{});var gc=f(be);ye=g(gc,"The template set two targets:"),gc.forEach(w),De=v(a),Te=m(a,"P",{});var wc=f(Te);Ce=g(wc,"The image tag ("),Ie=m(wc,"CODE",{});var vc=f(Ie);Se=g(vc,'<img data-target="polaroid.image" />'),vc.forEach(w),Pe=g(wc,") and an input field ("),Oe=m(wc,"CODE",{});var Ec=f(Oe);ze=g(Ec,'<input data-target="polaroid.source" />'),Ec.forEach(w),Le=g(wc,") where we’ll generate the markdown tag."),wc.forEach(w),We=v(a),$e=m(a,"P",{});var bc=f($e);je=g(bc,"We use the "),Ae=m(bc,"CODE",{});var yc=f(Ae);Me=g(yc,"connect()"),yc.forEach(w),He=g(bc," function that is called whenever a new controller is detected to check if the browser supports clipboard access and if it does we’ll add a class name to the polaroid element. We can use CSS to render the copy button."),bc.forEach(w),Re=v(a),qe=m(a,"P",{});var Dc=f(qe);Ue=g(Dc,"We also calculate the image ratio and fill out the input field, based on the data from the "),Fe=m(Dc,"CODE",{});var Tc=f(Fe);xe=g(Tc,"data"),Tc.forEach(w),_e=g(Dc," attributes we passed in the "),Be=m(Dc,"CODE",{});var Cc=f(Be);Ne=g(Cc,"dropzone"),Cc.forEach(w),Ye=g(Dc," controller using the "),Ge=m(Dc,"CODE",{});var Ic=f(Ge);Je=g(Ic,"target"),Ic.forEach(w),Qe=g(Dc,"s mentioned above."),Dc.forEach(w),Ve=v(a),Ze=m(a,"H3",{id:!0});var Sc=f(Ze);Ke=m(Sc,"A",{href:!0});var Pc=f(Ke);Xe=g(Pc,"Set clipboard"),Pc.forEach(w),Sc.forEach(w),ao=v(a),no=m(a,"P",{});var Oc=f(no);so=g(Oc,"The last thing we need to do is to connect the link that says "),to=m(Oc,"CODE",{});var zc=f(to);eo=g(zc,"copy"),zc.forEach(w),oo=g(Oc," with the Stimulus controller:"),Oc.forEach(w),po=v(a),co=m(a,"PRE",{class:!0}),f(co).forEach(w),lo=v(a),ro=m(a,"P",{});var Lc=f(ro);io=g(Lc,"This will call the "),uo=m(Lc,"CODE",{});var Wc=f(uo);ko=g(Wc,"copy"),Wc.forEach(w),ho=g(Lc," function in our controller:"),Lc.forEach(w),mo=v(a),fo=m(a,"PRE",{class:!0}),f(fo).forEach(w),go=v(a),wo=m(a,"P",{});var $c=f(wo);vo=g($c,"The "),Eo=m($c,"CODE",{});var jc=f(Eo);bo=g(jc,"copy"),jc.forEach(w),yo=g($c," function stops the event so we can handle it ourselves. We select the value of the input and issue the "),Do=m($c,"CODE",{});var Ac=f(Do);To=g(Ac,"copy"),Ac.forEach(w),Co=g($c," command to the browser. Finally we add a class to our "),Io=m($c,"CODE",{});var Mc=f(Io);So=g(Mc,"polaroid"),Mc.forEach(w),Po=g($c," element, so we can show that the file has been copied."),$c.forEach(w),Oo=v(a),zo=m(a,"P",{});var Hc=f(zo);Lo=g(Hc,"With a few "),Wo=m(Hc,"A",{href:!0,rel:!0});var Rc=f(Wo);$o=g(Rc,"fontawesome"),Rc.forEach(w),jo=g(Hc," icons and a bit of CSS it now looks like this:"),Hc.forEach(w),Ao=v(a),o(Mo.$$.fragment,a),Ho=v(a),Ro=m(a,"P",{});var qc=f(Ro);qo=g(qc,"You can find the code on "),Uo=m(qc,"A",{href:!0,rel:!0});var Uc=f(Uo);Fo=g(Uc,"GitHub"),Uc.forEach(w),xo=g(qc," and view a "),_o=m(qc,"A",{href:!0,rel:!0});var Fc=f(_o);Bo=g(Fc,"live demo here"),Fc.forEach(w),qc.forEach(w),No=v(a),Yo=m(a,"P",{});var xc=f(Yo);Go=g(xc,"With all these amazing frameworks we have available these days it’s very easy to make a small one-page app to scratch an itch and Stimulus.js is a great library to add dynamic items to your page without having to use React or Vue and if you still use jQuery I highly recommend to move to Stimulus.js."),xc.forEach(w),this.h()},h(){E(s,"href","#the-problem"),E(n,"id","the-problem"),E(I,"href","https://matsimitsu.com/trips/asia-2014"),E(I,"rel","nofollow"),E(j,"href","https://cyberduck.io/"),E(j,"rel","nofollow"),E(x,"href","#the-solution"),E(F,"id","the-solution"),E(V,"href","https://stimulusjs.org/"),E(V,"rel","nofollow"),E(X,"href","https://stimulusjs.org/handbook/building-something-real"),E(X,"rel","nofollow"),E(ea,"href","#dropzone"),E(ta,"id","dropzone"),E(ha,"class","language-html"),E(en,"href","#the-stimulus-controller"),E(tn,"id","the-stimulus-controller"),E(un,"class","language-javascript"),E(On,"href","#drop-the-image"),E(Pn,"id","drop-the-image"),E(Mn,"href","https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/File_drag_and_drop#Process_the_drop"),E(Mn,"rel","nofollow"),E(Un,"class","language-javascript"),E(ns,"href","#load-the-image"),E(as,"id","load-the-image"),E(ps,"href","https://developer.mozilla.org/en-US/docs/Web/API/FileReader"),E(ps,"rel","nofollow"),E(ms,"href","https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs"),E(ms,"rel","nofollow"),E(bs,"class","language-javascript"),E($s,"href","#render-the-image"),E(Ws,"id","render-the-image"),E(Vs,"href","https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template"),E(Vs,"rel","nofollow"),E(tt,"class","language-html"),E(Dt,"class","language-javascript"),E(ee,"href","#the-polaroid"),E(te,"id","the-polaroid"),E(ve,"class","language-javascript"),E(Ke,"href","#set-clipboard"),E(Ze,"id","set-clipboard"),E(co,"class","language-html"),E(fo,"class","language-javascript"),E(Wo,"href","https://fontawesome.com/"),E(Wo,"rel","nofollow"),E(Uo,"href","https://gist.github.com/matsimitsu/629ea64255f3e458a9bdba3415727e18"),E(Uo,"rel","nofollow"),E(_o,"href","https://matsimitsu.com/dropzone/"),E(_o,"rel","nofollow")},m(a,e){b(a,n,e),y(n,s),y(s,t),b(a,c,e),b(a,u,e),y(u,T),y(u,I),y(I,S),y(u,P),b(a,O,e),p(z,a,e),b(a,L,e),b(a,W,e),y(W,$),y(W,j),y(j,A),y(W,M),b(a,H,e),b(a,R,e),y(R,q),b(a,U,e),b(a,F,e),y(F,x),y(x,_),b(a,B,e),b(a,N,e),y(N,Y),b(a,G,e),b(a,J,e),y(J,Q),y(J,V),y(V,Z),y(J,K),y(J,X),y(X,aa),y(J,na),b(a,sa,e),b(a,ta,e),y(ta,ea),y(ea,oa),b(a,pa,e),b(a,ca,e),y(ca,la),b(a,ra,e),b(a,ia,e),y(ia,ua),b(a,ka,e),b(a,ha,e),ha.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n  <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropzone<span class="token punctuation">"</span></span>\n  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropzone<span class="token punctuation">"</span></span>\n  <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dragover->dropzone#acceptDrop drop->dropzone#handleDrop dragleave->dropzone#leaveDrop<span class="token punctuation">"</span></span>\n<span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>\n    Base url: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropzone.baseUrl<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>\n\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dropzone.polaroidList<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code>',b(a,da,e),b(a,ma,e),y(ma,fa),y(ma,ga),y(ga,wa),y(ma,va),y(ma,Ea),y(Ea,ba),y(ma,ya),y(ma,Da),y(Da,Ta),y(ma,Ca),b(a,Ia,e),b(a,Sa,e),y(Sa,Pa),y(Sa,Oa),y(Oa,za),y(Sa,La),y(Sa,Wa),y(Wa,$a),y(Sa,ja),y(Sa,Aa),y(Aa,Ma),y(Sa,Ha),y(Sa,Ra),y(Ra,qa),y(Sa,Ua),b(a,Fa,e),b(a,xa,e),y(xa,_a),y(xa,Ba),y(Ba,Na),y(xa,Ya),b(a,Ga,e),b(a,Ja,e),y(Ja,Qa),y(Ja,Va),y(Va,Za),y(Ja,Ka),y(Ja,Xa),y(Xa,an),y(Ja,nn),b(a,sn,e),b(a,tn,e),y(tn,en),y(en,on),b(a,pn,e),b(a,cn,e),y(cn,ln),b(a,rn,e),b(a,un,e),un.innerHTML='<code class="language-javascript">application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"dropzone"</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Stimulus<span class="token punctuation">.</span>Controller <span class="token punctuation">&#123;</span>\n  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">targets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">"polaroidList"</span><span class="token punctuation">,</span> <span class="token string">"baseUrl"</span><span class="token punctuation">]</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token function">acceptDrop</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"dropzone--dropping"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n  <span class="token function">leaveDrop</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dropzone--dropping"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token function">handleDrop</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n\t  ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">/* [...] */</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token function">addImage</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">/* [...] */</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token function">renderImage</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">/* [...] */</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code>',b(a,kn,e),b(a,hn,e),y(hn,dn),y(hn,mn),y(mn,fn),y(hn,gn),y(hn,wn),y(wn,vn),y(hn,En),y(hn,bn),y(bn,yn),y(hn,Dn),b(a,Tn,e),b(a,Cn,e),y(Cn,In),b(a,Sn,e),b(a,Pn,e),y(Pn,On),y(On,zn),b(a,Ln,e),b(a,Wn,e),y(Wn,$n),b(a,jn,e),b(a,An,e),y(An,Mn),y(Mn,Hn),y(An,Rn),b(a,qn,e),b(a,Un,e),Un.innerHTML='<code class="language-javascript"><span class="token function">handleDrop</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"dropzone--dropping"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// Use DataTransferItemList interface to access the file(s)</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token comment">// If dropped items aren\'t files, reject them</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">\'file\'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n        <span class="token keyword">var</span> file <span class="token operator">=</span> ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAsFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addImage</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>\n      <span class="token punctuation">&#125;</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>\n    <span class="token comment">// Use DataTransfer interface to access the file(s)</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addImage</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span></code>',b(a,Fn,e),b(a,xn,e),y(xn,_n),y(xn,Bn),y(Bn,Nn),y(xn,Yn),b(a,Gn,e),b(a,Jn,e),y(Jn,Qn),y(Jn,Vn),y(Vn,Zn),y(Jn,Kn),b(a,Xn,e),b(a,as,e),y(as,ns),y(ns,ss),b(a,ts,e),b(a,es,e),y(es,os),y(es,ps),y(ps,cs),y(es,ls),y(es,rs),y(rs,is),y(es,us),y(es,ks),y(ks,hs),y(es,ds),y(es,ms),y(ms,fs),b(a,gs,e),b(a,ws,e),y(ws,vs),b(a,Es,e),b(a,bs,e),bs.innerHTML='<code class="language-javascript"><span class="token function">addImage</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=></span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderImage</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',b(a,ys,e),b(a,Ds,e),y(Ds,Ts),y(Ds,Cs),y(Cs,Is),y(Ds,Ss),y(Ds,Ps),y(Ps,Os),y(Ds,zs),b(a,Ls,e),b(a,Ws,e),y(Ws,$s),y($s,js),b(a,As,e),b(a,Ms,e),y(Ms,Hs),y(Ms,Rs),y(Rs,qs),y(Ms,Us),y(Ms,Fs),y(Fs,xs),y(Ms,_s),b(a,Bs,e),b(a,Ns,e),y(Ns,Ys),y(Ns,Gs),y(Gs,Js),y(Ns,Qs),y(Ns,Vs),y(Vs,Zs),y(Ns,Ks),b(a,Xs,e),b(a,at,e),y(at,nt),b(a,st,e),b(a,tt,e),tt.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid-template<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">data-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid.image<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid-copied<span class="token punctuation">"</span></span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid.copied<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      Copied!\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>copy-elements<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid.source<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">readonly</span> <span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid#copy<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid-button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n       Copy\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code>',b(a,et,e),b(a,ot,e),y(ot,pt),y(ot,ct),y(ct,lt),y(ot,rt),b(a,it,e),b(a,ut,e),y(ut,kt),y(ut,ht),y(ht,dt),y(ut,mt),b(a,ft,e),b(a,gt,e),y(gt,wt),y(gt,vt),y(vt,Et),y(gt,bt),b(a,yt,e),b(a,Dt,e),Dt.innerHTML='<code class="language-javascript"><span class="token function">renderImage</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  <span class="token keyword">var</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">\'#polaroid-template\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// Clone template and fill the values</span>\n  <span class="token keyword">var</span> clone <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">importNode</span><span class="token punctuation">(</span>template<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// Set the image source and data attributes from the FileReader</span>\n  <span class="token keyword">var</span> img <span class="token operator">=</span> clone<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  img<span class="token punctuation">.</span>src <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>\n  img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-filename"</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-url"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseUrlTarget<span class="token punctuation">.</span>value <span class="token operator">+</span> file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>polaroidListTarget<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',b(a,Tt,e),b(a,Ct,e),y(Ct,It),b(a,St,e),b(a,Pt,e),y(Pt,Ot),y(Pt,zt),y(zt,Lt),y(Pt,Wt),b(a,$t,e),b(a,jt,e),y(jt,At),y(jt,Mt),y(Mt,Ht),y(jt,Rt),y(jt,qt),y(qt,Ut),y(jt,Ft),y(jt,xt),y(xt,_t),y(jt,Bt),y(jt,Nt),y(Nt,Yt),y(jt,Gt),y(jt,Jt),y(Jt,Qt),y(jt,Vt),b(a,Zt,e),b(a,Kt,e),y(Kt,Xt),b(a,ae,e),p(ne,a,e),b(a,se,e),b(a,te,e),y(te,ee),y(ee,oe),b(a,pe,e),b(a,ce,e),y(ce,le),y(ce,re),y(re,ie),y(ce,ue),y(ce,ke),y(ke,he),y(ce,de),y(ce,me),y(me,fe),y(ce,ge),b(a,we,e),b(a,ve,e),ve.innerHTML='<code class="language-javascript">application<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"polaroid"</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Stimulus<span class="token punctuation">.</span>Controller <span class="token punctuation">&#123;</span>\n  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">targets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">"source"</span><span class="token punctuation">,</span> <span class="token string">"image"</span><span class="token punctuation">]</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"polaroid--copied"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">&#125;</span>\n\n  <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">queryCommandSupported</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"polaroid--supported"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">&#125;</span>\n\n    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">;</span>\n    <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageTarget<span class="token punctuation">;</span>\n    <span class="token keyword">var</span> ratio <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>naturalWidth <span class="token operator">/</span> img<span class="token punctuation">.</span>naturalHeight <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// Sets a markdown image tag: ![filename](url, ratio)</span>\n    input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"!["</span> <span class="token operator">+</span> img<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-filename"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"]("</span> <span class="token operator">+</span> img<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-url"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ""</span> <span class="token operator">+</span> ratio <span class="token operator">+</span> <span class="token string">"")"</span>\n  <span class="token punctuation">&#125;</span>\n<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code>',b(a,Ee,e),b(a,be,e),y(be,ye),b(a,De,e),b(a,Te,e),y(Te,Ce),y(Te,Ie),y(Ie,Se),y(Te,Pe),y(Te,Oe),y(Oe,ze),y(Te,Le),b(a,We,e),b(a,$e,e),y($e,je),y($e,Ae),y(Ae,Me),y($e,He),b(a,Re,e),b(a,qe,e),y(qe,Ue),y(qe,Fe),y(Fe,xe),y(qe,_e),y(qe,Be),y(Be,Ne),y(qe,Ye),y(qe,Ge),y(Ge,Je),y(qe,Qe),b(a,Ve,e),b(a,Ze,e),y(Ze,Ke),y(Ke,Xe),b(a,ao,e),b(a,no,e),y(no,so),y(no,to),y(to,eo),y(no,oo),b(a,po,e),b(a,co,e),co.innerHTML='<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">data-action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid#copy<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>polaroid-button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  Copy\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code>',b(a,lo,e),b(a,ro,e),y(ro,io),y(ro,uo),y(uo,ko),y(ro,ho),b(a,mo,e),b(a,fo,e),fo.innerHTML='<code class="language-javascript"><span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>\n  ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>sourceTarget<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">"copy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"polaroid--copied"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">&#125;</span></code>',b(a,go,e),b(a,wo,e),y(wo,vo),y(wo,Eo),y(Eo,bo),y(wo,yo),y(wo,Do),y(Do,To),y(wo,Co),y(wo,Io),y(Io,So),y(wo,Po),b(a,Oo,e),b(a,zo,e),y(zo,Lo),y(zo,Wo),y(Wo,$o),y(zo,jo),b(a,Ao,e),p(Mo,a,e),b(a,Ho,e),b(a,Ro,e),y(Ro,qo),y(Ro,Uo),y(Uo,Fo),y(Ro,xo),y(Ro,_o),y(_o,Bo),b(a,No,e),b(a,Yo,e),y(Yo,Go),Jo=!0},p:D,i(a){Jo||(l(z.$$.fragment,a),l(ne.$$.fragment,a),l(Mo.$$.fragment,a),Jo=!0)},o(a){r(z.$$.fragment,a),r(ne.$$.fragment,a),r(Mo.$$.fragment,a),Jo=!1},d(a){a&&w(n),a&&w(c),a&&w(u),a&&w(O),i(z,a),a&&w(L),a&&w(W),a&&w(H),a&&w(R),a&&w(U),a&&w(F),a&&w(B),a&&w(N),a&&w(G),a&&w(J),a&&w(sa),a&&w(ta),a&&w(pa),a&&w(ca),a&&w(ra),a&&w(ia),a&&w(ka),a&&w(ha),a&&w(da),a&&w(ma),a&&w(Ia),a&&w(Sa),a&&w(Fa),a&&w(xa),a&&w(Ga),a&&w(Ja),a&&w(sn),a&&w(tn),a&&w(pn),a&&w(cn),a&&w(rn),a&&w(un),a&&w(kn),a&&w(hn),a&&w(Tn),a&&w(Cn),a&&w(Sn),a&&w(Pn),a&&w(Ln),a&&w(Wn),a&&w(jn),a&&w(An),a&&w(qn),a&&w(Un),a&&w(Fn),a&&w(xn),a&&w(Gn),a&&w(Jn),a&&w(Xn),a&&w(as),a&&w(ts),a&&w(es),a&&w(gs),a&&w(ws),a&&w(Es),a&&w(bs),a&&w(ys),a&&w(Ds),a&&w(Ls),a&&w(Ws),a&&w(As),a&&w(Ms),a&&w(Bs),a&&w(Ns),a&&w(Xs),a&&w(at),a&&w(st),a&&w(tt),a&&w(et),a&&w(ot),a&&w(it),a&&w(ut),a&&w(ft),a&&w(gt),a&&w(yt),a&&w(Dt),a&&w(Tt),a&&w(Ct),a&&w(St),a&&w(Pt),a&&w($t),a&&w(jt),a&&w(Zt),a&&w(Kt),a&&w(ae),i(ne,a),a&&w(se),a&&w(te),a&&w(pe),a&&w(ce),a&&w(we),a&&w(ve),a&&w(Ee),a&&w(be),a&&w(De),a&&w(Te),a&&w(We),a&&w($e),a&&w(Re),a&&w(qe),a&&w(Ve),a&&w(Ze),a&&w(ao),a&&w(no),a&&w(po),a&&w(co),a&&w(lo),a&&w(ro),a&&w(mo),a&&w(fo),a&&w(go),a&&w(wo),a&&w(Oo),a&&w(zo),a&&w(Ao),i(Mo,a),a&&w(Ho),a&&w(Ro),a&&w(No),a&&w(Yo)}}}function S(a){let n,s;const k=[P];let h={$$slots:{default:[I]},$$scope:{ctx:a}};for(let e=0;e<k.length;e+=1)h=t(h,k[e]);return n=new T({props:h}),{c(){e(n.$$.fragment)},l(a){o(n.$$.fragment,a)},m(a,t){p(n,a,t),s=!0},p(a,[s]){const t=0&s?c(k,[u(P)]):{};1&s&&(t.$$scope={dirty:s,ctx:a}),n.$set(t)},i(a){s||(l(n.$$.fragment,a),s=!0)},o(a){r(n.$$.fragment,a),s=!1},d(a){i(n,a)}}}const P={title:"Creating a small Stimulus.js app to handle Markdown Images",date:"2019-02-14T00:00:00.000Z",tags:null,summary:"Markdown is great, but not so much when you have dozens of images in a file and don't know what is what. This little app helps me sort through the images."};export default class extends a{constructor(a){super(),n(this,a,null,S,s,{})}}export{P as metadata};
